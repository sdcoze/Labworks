## Керування процесами-транзакціями в базах даних

### 1 Теоретичне завдання зі створення історій виконання транзакцій
T1= W[D] W[A] C1
T2= R[D] R[A] W[D] C2
T3= W[A] R[B] W[D] C3

H1(T1,T2,T3)=X1[D] W1[D] R2[D] X3[A] W3[A] X1[A]-Wait R2[A] R3[B] X2[D]-Wait X3[D]-Wait

char* lock_table[][3] = { 
{ "A", "X3", "X1" }, 
{ "B", " ", " " },
{ "D", "X1", "X2" }};

2.1.1 Створити історію квазіпаралельного успішного виконання транзакцій для
протоколу 1-го ступеня блокування.

int wait[][2] = {{1, 3}, {2, 1}, {3, 1}};

В цьому графі є цикл, який означає наявність Deadlock-стану.

2.1.2 Для створеної історії з попереднього завдання визначити наявність Deadlockстану транзакції, створивши граф очікування транзакцій, та зробити відповідний висновок. Представити граф у вигляді масиву на мові програмування С.

H1(T1,T2,T3)=X1[D] W1[D] S2[D]-Wait X3[A] W3[A] X1[A]-Wait S3[B] R3[B] X3[D]-Wait

char* lock_table[][3] = {
{ "A", "X3", "X1" },
{ "B", "S3", "" },
{ "D", "X1", "S2,X3" }};

2.1.3 Створити історію квазіпаралельного успішного виконання транзакцій для протоколу 2-го ступеня блокування. Описати таблицю блокування транзакцій до моменту першої фіксації змін однієї з транзакцій у вигляді масиву на мові програмування С.

int wait[3][2] = {{2, 1}, {1, 3}, {3, 1}};

В цьому графі є цикл, який означає наявність Deadlock-стану.

2.1.4 Для створеної історії з попереднього завдання визначити наявність Deadlockстану транзакції, створивши граф очікування транзакцій, та зробити відповідник висновок. Представити граф у вигляді масиву на мові програмування С.

### 2 Налаштування бази даних

![mintty_UlObbf2j2R](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/6b858238-f017-403d-96ff-40019311349f)

Рис. 1 – Фрагмент екрану з рішення завдання 2.2.1 "Встановити з’єднання з БД, назва якої співпадає з іменем вашого користувача в ОС Linux, використовуючи користувача СКБД за таким же іменем."

![mintty_2BDnOEhHue](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/d9038f4f-9c20-43b0-89ce-c55d1b7635cf)

Рис. 2 – Фрагмент екрану з рішення завдання 2.2.2 "Виконати команди отримання імені поточного користувача СКБД та назви БД."

![mintty_aOj73IvjvJ](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/31c5eb63-bf15-4f0b-8c84-eb96320bb89d)

Рис. 3 – Фрагмент екрану з рішення завдання 2.2.3 "У відповідності із варіантом з таблиці 16 створити реляційну таблицю."

![mintty_Oyv0c2MFJu](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/68db0a8d-04ca-4f94-8a5e-c65aed3ca51c)

Рис. 4 – Фрагмент екрану з рішення завдання 2.2.4 "У відповідності із варіантом з таблиці 16 додати рядок в реляційну таблицю."

![mintty_gyBGtl10su](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/6035388e-b3d3-4d7e-9b08-337c1c095f31)

Рис. 5 – Фрагмент екрану з рішення завдання 2.2.5 "Створити ще одну операцію внесення рядка в таблицю, який буде відрізнятися значеннями всіх змінних (стовпчиків) від прикладу з варіанту, а одна із змінних повинна враховувати значення із транслітерацією вашого прізвища."

![mintty_L6DNZARd1P](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/df800638-6af7-4f7b-8cbd-77a695f52511)

Рис. 6 – Фрагмент екрану з рішення завдання 2.2.6 "Переглянути зміст таблиці, враховуючи всі стовпчики всіх рядків таблиці."

### 3 Керування квазіпаралельним виконанням транзакцій з використанням команд блокування

![mintty_knja4ByhTM](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/42bf2e7a-48a7-4805-92cb-21d18f47cadc)

Рис. 7 – Фрагмент екрану з рішення завдання 2.3.1 "Створити файл з назвою за шаблоном «ваше прізвище_transaction_lock_1.sql», наприклад, blazhko_transaction_lock_1.sql, та додати до нього операції двох транзакцій, кожна з яких повинна включати наступні операції: 
+ операція блокування для протоколу 1-го ступеня блокування; 
+ операція читання всіх стовпчиків першого рядку таблиці;
+ операція зміни значення другого стовпчика таблиці у першому рядку; 
+ повторна операція читання всіх стовпчиків першого рядку таблиці; 
+ операція фіксації всіх виконаних операцій."

![chrome_7EhVKJHXK5](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/461413a6-3f0c-4c37-8734-d3e3cc01f049)

Рис. 8 – Фрагмент екрану з рішення завдання 2.3.3 "У двох псевдотерміналах виконати операції транзакцій при їх квазіпаралельному режимі роботи за умови, що одна з транзакція стартує першою."

![chrome_A6QOx2L1fe](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/10499974-92ed-4056-95bf-8e3d7b1f0361)

Рис. 9 – Фрагмент екрану з рішення завдання 2.3.4 "Повторити роботу транзакцій, але у першій транзакції замість операції фіксації виконати операцію відміни всіх операцій транзакції."

![mintty_UKpabd322G](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/e5213b66-53da-492e-996c-3b230e66bca5)

Рис. 10 – Фрагмент екрану з рішення завдання 2.3.5 "Створити файл з назвою за шаблоном «ваше прізвище_transaction_lock_2.sql», наприклад, blazhko_transaction_lock_2.sql, зі змістом файлу, створеного у пункті 2.3.1, але вже враховуючи протокол 2-го ступеня блокування."

![mintty_4BS6BG07gv](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/e380d439-07ca-45f5-9b44-9dfc0336ea6f)

Рис. 11 – Фрагмент екрану з рішення завдання 2.3.6 "Повторити роботу транзакцій з використанням протоколу 2-го ступеня блокування, але з додатковим параметром NOWAIT."

### 4 Керування квазіпаралельним виконанням транзакцій при наявності Deadlock-станів.

![mintty_hj8yCHGHit](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/4af1c6d6-0788-4d3b-9fa8-5c7b340380dc)

Рис. 12 – Фрагмент екрану з рішення завдання 2.4.1 "Створити файл з назвою за шаблоном «ваше прізвище_deadlock.sql», наприклад, blazhko_deadlock.sql, зі змістом файлу, створеного у пункті 2.3.1, але вже модифікованого так, щоб транзакції призводили до Deadlock-стану."

![mintty_huUPn0V7td](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/a8a85fec-72ba-4521-87b7-169c0bc24893)
![mintty_BMa4jd5ZOm](https://github.com/oleksandrblazhko/ai225-muranov/assets/44908390/613c28e0-7b23-4f6b-b42d-9d72c1c1a416)

Автоматично скасована друга транзакція, остання операція якої призвела до появи deadlock-стану. Перша транзація виконалась до кінця. Це підтвержує таблиця процесів.

Рис. 13 – Фрагмент екрану з рішення завдання 2.4.2 "Виконати модифіковані транзакції."
